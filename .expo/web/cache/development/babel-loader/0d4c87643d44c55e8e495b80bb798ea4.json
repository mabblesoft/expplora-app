{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _expoModulesCore = require(\"expo-modules-core\");\n\nvar _invariant = _interopRequireDefault(require(\"invariant\"));\n\nvar EventTypes = ['url'];\nvar listeners = [];\nvar _default = {\n  addEventListener: function addEventListener(type, listener) {\n    (0, _invariant.default)(EventTypes.indexOf(type) !== -1, \"Linking.addEventListener(): \".concat(type, \" is not a valid event\"));\n\n    var nativeListener = function nativeListener(nativeEvent) {\n      return listener({\n        url: window.location.href,\n        nativeEvent: nativeEvent\n      });\n    };\n\n    listeners.push({\n      listener: listener,\n      nativeListener: nativeListener\n    });\n    window.addEventListener('message', nativeListener, false);\n  },\n  removeEventListener: function removeEventListener(type, listener) {\n    (0, _invariant.default)(EventTypes.indexOf(type) !== -1, \"Linking.removeEventListener(): \".concat(type, \" is not a valid event.\"));\n    var listenerIndex = listeners.findIndex(function (pair) {\n      return pair.listener === listener;\n    });\n    (0, _invariant.default)(listenerIndex !== -1, 'Linking.removeEventListener(): cannot remove an unregistered event listener.');\n    var nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n  canOpenURL: function canOpenURL(url) {\n    return (0, _asyncToGenerator2.default)(_regenerator.default.mark(function _callee() {\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", true);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  getInitialURL: function getInitialURL() {\n    return (0, _asyncToGenerator2.default)(_regenerator.default.mark(function _callee2() {\n      return _regenerator.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (_expoModulesCore.Platform.isDOMAvailable) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", '');\n\n            case 2:\n              return _context2.abrupt(\"return\", window.location.href);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  openURL: function openURL(url) {\n    return (0, _asyncToGenerator2.default)(_regenerator.default.mark(function _callee3() {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (_expoModulesCore.Platform.isDOMAvailable) {\n                window.location = new URL(url, window.location).toString();\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n};\nexports.default = _default;","map":{"version":3,"sources":["../src/ExpoLinking.web.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAIA,IAAM,UAAU,GAAG,CAAC,KAAD,CAAnB;AAEA,IAAM,SAAS,GAAmE,EAAlF;eAEe;EACb,gBADa,4BACI,IADJ,EACiB,QADjB,EACsC;IACjD,IAAA,kBAAA,EACE,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADhC,wCAEiC,IAFjC;;IAIA,IAAM,cAAc,GAAsB,SAApC,cAAoC,CAAC,WAAD;MAAA,OACxC,QAAQ,CAAC;QAAE,GAAG,EAAE,MAAM,CAAC,QAAP,CAAgB,IAAvB;QAA6B,WAAW,EAAX;MAA7B,CAAD,CADgC;IAAA,CAA1C;;IAEA,SAAS,CAAC,IAAV,CAAe;MAAE,QAAQ,EAAR,QAAF;MAAY,cAAc,EAAd;IAAZ,CAAf;IACA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,cAAnC,EAAmD,KAAnD;EACD,CAVY;EAYb,mBAZa,+BAYO,IAZP,EAYoB,QAZpB,EAYyC;IACpD,IAAA,kBAAA,EACE,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADhC,2CAEoC,IAFpC;IAIA,IAAM,aAAa,GAAG,SAAS,CAAC,SAAV,CAAoB,UAAC,IAAD;MAAA,OAAU,IAAI,CAAC,QAAL,KAAkB,QAA5B;IAAA,CAApB,CAAtB;IACA,IAAA,kBAAA,EACE,aAAa,KAAK,CAAC,CADrB,EAEE,8EAFF;IAIA,IAAM,cAAc,GAAG,SAAS,CAAC,aAAD,CAAT,CAAyB,cAAhD;IACA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,cAAtC,EAAsD,KAAtD;IACA,SAAS,CAAC,MAAV,CAAiB,aAAjB,EAAgC,CAAhC;EACD,CAzBY;EA2BP,UA3BO,sBA2BI,GA3BJ,EA2Be;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA,iCAEnB,IAFmB;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAG3B,CA9BY;EAgCP,aAhCO,2BAgCM;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA,IACZ,yBAAA,CAAS,cADG;gBAAA;gBAAA;cAAA;;cAAA,kCACoB,EADpB;;YAAA;cAAA,kCAEV,MAAM,CAAC,QAAP,CAAgB,IAFN;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAGlB,CAnCY;EAqCP,OArCO,mBAqCC,GArCD,EAqCY;IAAA;MAAA;QAAA;UAAA;YAAA;cACvB,IAAI,yBAAA,CAAS,cAAb,EAA6B;gBAE3B,MAAM,CAAC,QAAP,GAAkB,IAAI,GAAJ,CAAQ,GAAR,EAAa,MAAM,CAAC,QAApB,EAA8B,QAA9B,EAAlB;cACD;;YAJsB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAKxB;AA1CY,C","sourcesContent":["import { Platform } from 'expo-modules-core';\nimport invariant from 'invariant';\n\nimport { NativeURLListener, URLListener } from './Linking.types';\n\nconst EventTypes = ['url'];\n\nconst listeners: { listener: URLListener; nativeListener: NativeURLListener }[] = [];\n\nexport default {\n  addEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.addEventListener(): ${type} is not a valid event`\n    );\n    const nativeListener: NativeURLListener = (nativeEvent) =>\n      listener({ url: window.location.href, nativeEvent });\n    listeners.push({ listener, nativeListener });\n    window.addEventListener('message', nativeListener, false);\n  },\n\n  removeEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.removeEventListener(): ${type} is not a valid event.`\n    );\n    const listenerIndex = listeners.findIndex((pair) => pair.listener === listener);\n    invariant(\n      listenerIndex !== -1,\n      'Linking.removeEventListener(): cannot remove an unregistered event listener.'\n    );\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n\n  async canOpenURL(url: string): Promise<boolean> {\n    // In reality this should be able to return false for links like `chrome://` on chrome.\n    return true;\n  },\n\n  async getInitialURL(): Promise<string> {\n    if (!Platform.isDOMAvailable) return '';\n    return window.location.href;\n  },\n\n  async openURL(url: string): Promise<void> {\n    if (Platform.isDOMAvailable) {\n      // @ts-ignore\n      window.location = new URL(url, window.location).toString();\n    }\n  },\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}